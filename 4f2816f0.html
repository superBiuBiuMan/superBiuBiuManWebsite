<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>前端canvas的学习和将网页生成canvas图片 | 梦洁小站-属于你我的小天地</title><meta name="author" content="梦洁"><meta name="copyright" content="梦洁"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="目标 最终可以实现二维码填充在指定图片位置,并且可以填充文字在图片中 学习笔记,个人记录, 学习掘金大佬德育处主任 https:&#x2F;&#x2F;juejin.cn&#x2F;user&#x2F;2673620576140030   专栏 https:&#x2F;&#x2F;juejin.cn&#x2F;column&#x2F;7113168145912692773   作者仓库 https:&#x2F;&#x2F;gitee.com&#x2F;k21vin&#x2F;thunder-monkey-canva"><meta property="og:type" content="article"><meta property="og:title" content="前端canvas的学习和将网页生成canvas图片"><meta property="og:url" content="https://www.dreamlove.top/4f2816f0.html"><meta property="og:site_name" content="梦洁小站-属于你我的小天地"><meta property="og:description" content="目标 最终可以实现二维码填充在指定图片位置,并且可以填充文字在图片中 学习笔记,个人记录, 学习掘金大佬德育处主任 https:&#x2F;&#x2F;juejin.cn&#x2F;user&#x2F;2673620576140030   专栏 https:&#x2F;&#x2F;juejin.cn&#x2F;column&#x2F;7113168145912692773   作者仓库 https:&#x2F;&#x2F;gitee.com&#x2F;k21vin&#x2F;thunder-monkey-canva"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403181529884.png"><meta property="article:published_time" content="2024-03-16T10:09:28.000Z"><meta property="article:modified_time" content="2024-03-16T10:09:28.000Z"><meta property="article:author" content="梦洁"><meta property="article:tag" content="HTML"><meta property="article:tag" content="css"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403181529884.png"><link rel="shortcut icon" href="https://oss.ypggb.com/i/2025/07/01/pk26bw.png"><link rel="canonical" href="https://www.dreamlove.top/4f2816f0.html"><link rel="preconnect" href="https://lib.baomitu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://lib.baomitu.com/font-awesome/6.5.1/css/all.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancyapps-ui/5.0.33/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"G7A2D1SYPY",apiKey:"49056313a9be02852c7dbedfcb772831",indexName:"blog",hits:{per_page:20},languages:{input_placeholder:"搜索文章",hits_empty:"找不到您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}},localSearch:void 0,translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,infinitegrid:{js:"https://lib.baomitu.com/egjs-infinitegrid/4.11.1/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"前端canvas的学习和将网页生成canvas图片",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-03-16 10:09:28"}</script><script>(e=>{e.saveToLocal={set:(e,t,o)=>{if(0===o)return;const a={value:t,expiry:Date.now()+864e5*o};localStorage.setItem(e,JSON.stringify(a))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!(Date.now()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=(e,t={})=>new Promise((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=a,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,o())},Object.keys(t).forEach(e=>{n.setAttribute(e,t[e])}),document.head.appendChild(n)}),e.getCSS=(e,t=!1)=>new Promise((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onerror=a,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,o())},document.head.appendChild(n)}),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://oss.ypggb.com/i/2025/07/01/pk26bw.png" onerror='onerror=null,src="/img/404.png"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">182</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">101</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">73</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情和链接</span></a></div><div class="menus_item"><a class="site-page" href="/navigation/"><i class="fa-fw fas fa-link"></i><span> 链接导航</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 私有化导航</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://mark.123916.xyz/"><i class="fa-fw fas fa-database"></i><span> 导航</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://cloud.reassurehome.com/"><i class="fa-fw fas fa-hippo"></i><span> Alist(私有)</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://short.123916.xyz/027a2"><i class="fa-fw fas fa-paperclip"></i><span> clash免费订阅地址</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://short.123916.xyz/admin/"><i class="fa-fw fas fa-paperclip"></i><span> 短链接生成</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 好玩的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://make.girls.moe/#/"><i class="fa-fw fas fa-database"></i><span> 动漫头像制作</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="http://dfqshy.ysepan.com/"><i class="fa-fw fas fa-database"></i><span> FC游戏大全网盘</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.yikm.net/"><i class="fa-fw fas fa-database"></i><span> 小霸王</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.return8090.com/"><i class="fa-fw fas fa-database"></i><span> 小霸王(广告多)</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="http://farm.dreamlove.top"><i class="fa-fw fas fa-database"></i><span> QQ农场经典版</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://codepip.com/"><i class="fa-fw fas fa-database"></i><span> CssGame</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://photo.123916.xyz/"><i class="fa-fw fas fa-database"></i><span> 有趣的照片</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://buy.dreamlove.top/"><i class="fa-fw fas fa-heart"></i><span> 购物</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403181529884.png)"><nav id="nav"><span id="blog-info"><a href="/" title="梦洁小站-属于你我的小天地"><span class="site-name">梦洁小站-属于你我的小天地</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情和链接</span></a></div><div class="menus_item"><a class="site-page" href="/navigation/"><i class="fa-fw fas fa-link"></i><span> 链接导航</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 私有化导航</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://mark.123916.xyz/"><i class="fa-fw fas fa-database"></i><span> 导航</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://cloud.reassurehome.com/"><i class="fa-fw fas fa-hippo"></i><span> Alist(私有)</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://short.123916.xyz/027a2"><i class="fa-fw fas fa-paperclip"></i><span> clash免费订阅地址</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://short.123916.xyz/admin/"><i class="fa-fw fas fa-paperclip"></i><span> 短链接生成</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 好玩的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://make.girls.moe/#/"><i class="fa-fw fas fa-database"></i><span> 动漫头像制作</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="http://dfqshy.ysepan.com/"><i class="fa-fw fas fa-database"></i><span> FC游戏大全网盘</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.yikm.net/"><i class="fa-fw fas fa-database"></i><span> 小霸王</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.return8090.com/"><i class="fa-fw fas fa-database"></i><span> 小霸王(广告多)</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="http://farm.dreamlove.top"><i class="fa-fw fas fa-database"></i><span> QQ农场经典版</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://codepip.com/"><i class="fa-fw fas fa-database"></i><span> CssGame</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://photo.123916.xyz/"><i class="fa-fw fas fa-database"></i><span> 有趣的照片</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://buy.dreamlove.top/"><i class="fa-fw fas fa-heart"></i><span> 购物</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">前端canvas的学习和将网页生成canvas图片</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-03-16T10:09:28.000Z" title="发表于 2024-03-16 10:09:28">2024-03-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-03-16T10:09:28.000Z" title="更新于 2024-03-16 10:09:28">2024-03-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/HTML/">HTML</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/HTML/css/">css</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>35分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="前端canvas的学习和将网页生成canvas图片"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h1><ul><li>最终可以实现二维码填充在指定图片位置,并且可以填充文字在图片中</li><li>学习笔记,个人记录,</li><li>学习掘金大佬<code>德育处主任</code><ul><li><a target="_blank" rel="noopener" href="https://juejin.cn/user/2673620576140030">https://juejin.cn/user/2673620576140030</a></li></ul></li><li>专栏<ul><li><a target="_blank" rel="noopener" href="https://juejin.cn/column/7113168145912692773">https://juejin.cn/column/7113168145912692773</a></li></ul></li><li>作者仓库<ul><li><a target="_blank" rel="noopener" href="https://gitee.com/k21vin/thunder-monkey-canvas">https://gitee.com/k21vin/thunder-monkey-canvas</a></li></ul></li></ul><h1 id="第一个-canvas"><a href="#第一个-canvas" class="headerlink" title="第一个 canvas"></a>第一个 canvas</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;c&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;200&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border:1px solid #ccc&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//获取canvas元素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#c&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//获取canvas上下文环境对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//绘制图形</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">moveTo</span>(<span class="number">100</span>, <span class="number">100</span>); <span class="comment">//起始点坐标(x,y)</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">lineTo</span>(<span class="number">200</span>, <span class="number">100</span>); <span class="comment">//重点坐标(x,y)</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">stroke</span>(); <span class="comment">//将起点和终点链接起来</span></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403080950246.png"></p><h1 id="不能通过-css-设置画布的宽高"><a href="#不能通过-css-设置画布的宽高" class="headerlink" title="不能通过 css 设置画布的宽高"></a>不能通过 css 设置画布的宽高</h1><ul><li>啊</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#c</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;c&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border:1px solid #ccc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//获取canvas元素</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#c&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//获取canvas上下文环境对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//绘制图形</span></span></span><br><span class="line"><span class="language-javascript">      cxt.<span class="title function_">moveTo</span>(<span class="number">100</span>, <span class="number">100</span>); <span class="comment">//起始点坐标(x,y)</span></span></span><br><span class="line"><span class="language-javascript">      cxt.<span class="title function_">lineTo</span>(<span class="number">200</span>, <span class="number">100</span>); <span class="comment">//重点坐标(x,y)</span></span></span><br><span class="line"><span class="language-javascript">      cxt.<span class="title function_">stroke</span>(); <span class="comment">//将起点和终点链接起来</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(cnv.<span class="property">width</span>); <span class="comment">//输出300</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(cnv.<span class="property">height</span>); <span class="comment">//输出150</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>canvas</code> 的默认宽度是 300px，默认高度是 150px。</p><ol><li>如果使用 <code>css</code> 修改 <code>canvas</code> 的宽高（比如本例变成 400px * 400px），那宽度就由 300px 拉伸到 400px，高度由 150px 拉伸到 400px。</li><li>使用 <code>js</code> 获取 <code>canvas</code> 的宽高，此时返回的是 <code>canvas</code> 的默认值。</li></ol><h1 id="坐标系"><a href="#坐标系" class="headerlink" title="坐标系"></a>坐标系</h1><ul><li><p>这个很重要,不能弄混了</p></li><li><p><code>Canvas</code> 使用的是 <strong>W3C 坐标系</strong> ，也就是遵循我们屏幕、报纸的阅读习惯，从上往下，从左往右。</p></li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403080955445.png"></p><p><strong>W3C 坐标系</strong> 和 <strong>数学直角坐标系</strong> 的 <code>X轴</code> 是一样的，只是 <code>Y轴</code> 的反向相反。</p><p><strong>W3C 坐标系</strong> 的 <code>Y轴</code> 正方向向下</p><h1 id="绘制直线"><a href="#绘制直线" class="headerlink" title="绘制直线"></a>绘制直线</h1><ul><li>使用<code>moveTo</code>,<code>lineTo</code>,<code>stroke</code>即可绘制出一条直线</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;c&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border:1px solid red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#c&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> cxt = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">moveTo</span>(<span class="number">100</span>, <span class="number">100</span>); <span class="comment">//起始点坐标(x,y)</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">lineTo</span>(<span class="number">200</span>, <span class="number">100</span>); <span class="comment">//下一个点的坐标(x,y)</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">stroke</span>(); <span class="comment">//链接起来</span></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403080959001.png"></p><ul><li>绘制多条直线就调用多次方法即可<ul><li>如果绘制的坐标点出现小数点,那么将会占据多一些格子,并将颜色平均分布(大概就是这个意思)</li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/7115431586857746440">https://juejin.cn/post/7115431586857746440</a></li></ul></li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081004544.png"></p><h2 id="设置样式"><a href="#设置样式" class="headerlink" title="设置样式"></a>设置样式</h2><ul><li><code>lineWidth</code>:线的粗细</li><li><code>strokeStyle</code>线的颜色</li><li><code>lineCap</code>:线帽</li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403072206206.png" alt="linecap"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;c&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border:1px solid red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#c&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> cxt = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>); <span class="comment">//获取canvas上下文环境对象</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">moveTo</span>(<span class="number">10</span>, <span class="number">10</span>); <span class="comment">//起始点坐标(x,y)</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">lineTo</span>(<span class="number">60</span>, <span class="number">60</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//设置线条的宽度</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">lineWidth</span> = <span class="number">20</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//更改线条的颜色</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">strokeStyle</span> = <span class="string">&quot;green&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//修改线帽</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">lineCap</span> = <span class="string">&quot;round&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">stroke</span>(); <span class="comment">//链接起来</span></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081009125.png"></p><h2 id="新开路径"><a href="#新开路径" class="headerlink" title="新开路径"></a>新开路径</h2><ul><li>我说怎么画 2 条线另外一条也变粗了</li><li>在绘制多条线段的同时，还要设置线段样式，通常需要开辟新路径。<strong>要不然样式之间会相互污染</strong>。</li><li>使用 <code>beginPath()</code> 方法，重新开一个路径<ul><li><strong>设置新线段的样式（必做项）</strong><ul><li>否则会出现前面影响后面,或者后面影响前面的情况出现</li></ul></li><li>比如前一个线设置了<code>strokeWidth:20</code>,那么即使开辟了新路径,不设置<code>strokeWidth</code>的话第二条路径还是依照<code>strokeWidth为20</code>进行绘制</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;c&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border:1px solid red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#c&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> cxt = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>); <span class="comment">//获取canvas上下文环境对象</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">moveTo</span>(<span class="number">10</span>, <span class="number">10</span>); <span class="comment">//起始点坐标(x,y)</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">lineTo</span>(<span class="number">60</span>, <span class="number">60</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//设置线条的宽度</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">lineWidth</span> = <span class="number">20</span>;</span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">stroke</span>(); <span class="comment">//链接起来</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//新开一个路径</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//设置新线段的样式</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">lineWidth</span> = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//更改线条的颜色</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">strokeStyle</span> = <span class="string">&quot;green&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//修改线帽</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">lineCap</span> = <span class="string">&quot;round&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">moveTo</span>(<span class="number">100</span>, <span class="number">100</span>); <span class="comment">//起始点坐标(x,y)</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">lineTo</span>(<span class="number">200</span>, <span class="number">100</span>); <span class="comment">//下一个点的坐标(x,y)</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">stroke</span>(); <span class="comment">//链接起来</span></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081013642.png"></p><ul><li>在设置 <code>beginPath()</code> 的同时，也各自设置样式。这样就能做到相互不影响了。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;c&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">width</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;c&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">moveTo</span>(<span class="number">20</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">lineTo</span>(<span class="number">200</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="property">lineWidth</span> = <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="property">strokeStyle</span> = <span class="string">&quot;pink&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">beginPath</span>(); <span class="comment">// 重新开启一个路径</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">moveTo</span>(<span class="number">20</span>, <span class="number">120.5</span>);</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">lineTo</span>(<span class="number">200</span>, <span class="number">120.5</span>);</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="property">lineWidth</span> = <span class="number">4</span>;</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="property">strokeStyle</span> = <span class="string">&quot;red&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="折线-特殊的直线"><a href="#折线-特殊的直线" class="headerlink" title="折线(特殊的直线)"></a>折线(特殊的直线)</h1><ul><li>也是使用方法<code>moveTo</code>,<code>lineTo</code>,<code>stroke</code>即可完成</li></ul><h1 id="矩形-rect"><a href="#矩形-rect" class="headerlink" title="矩形(rect)"></a>矩形(rect)</h1><ul><li>点组成线,线组成面,面构成图形,你可以使用绘制直线的方式去绘制矩形,但是有现成的方法当然有现成的</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;c&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border:1px solid red;height: 300px;width: 300px;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#c&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> cxt = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>); <span class="comment">//获取canvas上下文环境对象</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">strokeStyle</span> = <span class="string">&quot;green&quot;</span>; <span class="comment">//必须要写在绘制前面</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">strokeRect</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">120</span>, <span class="number">100</span>); <span class="comment">//起始点坐标(10,10) 宽120 高100</span></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081025544.png"></p><ul><li>大概这么理解,直接抄他的,嘻嘻</li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081025912.png"></p><h2 id="填充矩形"><a href="#填充矩形" class="headerlink" title="填充矩形"></a>填充矩形</h2><ul><li>你可以理解为 stroke 都是在做描边效果的,真正要创建填充的效果还是需要使用<code>fill</code>开头的一些关键字</li><li><strong>需要注意的是，<code>fillStyle</code> 必须写在 <code>fillRect()</code> 之前，不然样式不生效。</strong></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;c&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border:1px solid red;height: 300px;width: 300px;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#c&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> cxt = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>); <span class="comment">//获取canvas上下文环境对象</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">fillStyle</span> = <span class="string">&quot;blue&quot;</span>; <span class="comment">//必须要写在绘制前面</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">fillRect</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">120</span>, <span class="number">100</span>); <span class="comment">//起始点坐标(10,10) 宽120 高100</span></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081028842.png"></p><ul><li>同时使用<code>strokeRect()</code>和<code>fillRect()</code>,则是描边+填充效果</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;c&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border:1px solid red;height: 300px;width: 300px;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#c&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> cxt = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>); <span class="comment">//获取canvas上下文环境对象</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">fillStyle</span> = <span class="string">&quot;blue&quot;</span>; <span class="comment">//必须要写在绘制前面</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">fillRect</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">120</span>, <span class="number">100</span>); <span class="comment">//起始点坐标(10,10) 宽120 高100</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">strokeStyle</span> = <span class="string">&quot;green&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">strokeRect</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">120</span>, <span class="number">100</span>); <span class="comment">//起始点坐标(10,10) 宽120 高100</span></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081030059.png"></p><h2 id="使用-rect"><a href="#使用-rect" class="headerlink" title="使用 rect()"></a>使用 rect()</h2><ul><li><p><code>rect()</code> 和 <code>fillRect() 、strokeRect()</code> 的用法差不多，唯一的区别是：</p></li><li><p><strong><code>strokeRect()</code> 和 <code>fillRect()</code> 这两个方法调用后会立即绘制；<code>rect()</code> 方法被调用后，不会立刻绘制矩形，而是需要调用 <code>stroke()</code> 或 <code>fill()</code> 辅助渲染。</strong></p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;c&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border:1px solid red;height: 300px;width: 300px;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#c&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> cxt = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">strokeStyle</span> = <span class="string">&quot;pink&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">fillStyle</span> = <span class="string">&quot;blue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">rect</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">120</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">stroke</span>(); <span class="comment">//进行描边操作</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">fill</span>(); <span class="comment">//进行填充炒作</span></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081037862.png"></p><h2 id="clearRect"><a href="#clearRect" class="headerlink" title="clearRect()"></a>clearRect()</h2><ul><li>清空指定区域</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">clearRect</span>(x, y, width, height);</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;c&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border:1px solid red;height: 300px;width: 300px;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#c&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> cxt = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">strokeStyle</span> = <span class="string">&quot;pink&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="property">fillStyle</span> = <span class="string">&quot;blue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">rect</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">120</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">stroke</span>(); <span class="comment">//进行描边操作</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">fill</span>(); <span class="comment">//进行填充炒作</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//清空矩形</span></span></span><br><span class="line"><span class="language-javascript">    cxt.<span class="title function_">clearRect</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">80</span>);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081038410.png"></p><ul><li>也可以使用 clearRect 来清空当前矩形</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#c&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">cxt.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, cnv.<span class="property">width</span>, cnv.<span class="property">height</span>);</span><br></pre></td></tr></table></figure><h1 id="多边形"><a href="#多边形" class="headerlink" title="多边形"></a>多边形</h1><ul><li><code>Canvas</code> 要画多边形，需要使用 <code>moveTo()</code> 、 <code>lineTo()</code> 和 <code>closePath()</code><ul><li>需要真正闭合，使用 <code>closePath()</code> 方法。不要自己手动去连接 2 点</li></ul></li></ul><h2 id="三角形"><a href="#三角形" class="headerlink" title="三角形"></a>三角形</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;400&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="property">lineWidth</span> = <span class="number">5</span>; <span class="comment">//线条粗细</span></span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">moveTo</span>(<span class="number">10</span>, <span class="number">10</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">lineTo</span>(<span class="number">100</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">lineTo</span>(<span class="number">300</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">closePath</span>(); <span class="comment">//闭合路径</span></span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">stroke</span>(); <span class="comment">//绘制路径</span></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081055021.png"></p><h1 id="arc-圆"><a href="#arc-圆" class="headerlink" title="arc 圆"></a>arc 圆</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">arc</span>(x, y, r, sAngle, eAngle，counterclockwise)</span><br></pre></td></tr></table></figure><ul><li><code>x</code> 和 <code>y</code>: 圆心坐标</li><li><code>r</code>: 半径</li><li><code>sAngle</code>: 开始角度</li><li><code>eAngle</code>: 结束角度</li><li><code>counterclockwise</code>: 绘制方向（true: 逆时针; false: 顺时针），默认 false</li><li><strong>绘制圆形之前，必须先调用 <code>beginPath()</code> 方法！！！ 在绘制完成之后，还需要调用 <code>closePath()</code> 方法！！！</strong></li><li>大佬的图也通俗易懂</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;400&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">arc</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081311333.png"></p><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081311935.png"></p><ul><li><p>在实际开发中，为了让自己或者别的开发者更容易看懂<strong>弧度的数值</strong>，1° 应该写成 <code>Math.PI / 180</code>。(说的很好)</p><ul><li>100°: <code>100 * Math.PI / 180</code></li><li>110°: <code>110 * Math.PI / 180</code></li><li>241°: <code>241 * Math.PI / 180</code></li></ul></li><li><p>半圆</p><ul><li>结束角度为 180 度就是半圆了</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;400&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">arc</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081314882.png"></p><h2 id="弧线"><a href="#弧线" class="headerlink" title="弧线"></a>弧线</h2><ul><li>调用<code>arc()</code>方法不调用<code>closePath()</code>方法所画出的图像就是一条弧线</li><li>可用<code>arc()</code>或者<code>arcTo()</code>绘制弧线</li><li><code>arcTo语法</code><ul><li><code>arcTo()</code> 方法利用 <strong>开始点、控制点和结束点形成的夹角，绘制一段与夹角的两边相切并且半径为 <code>radius</code> 的圆弧</strong>。</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">arcTo</span>(cx, cy, x2, y2, radius);</span><br><span class="line"><span class="attr">cx</span>: 两切线交点的横坐标;</span><br><span class="line"><span class="attr">cy</span>: 两切线交点的纵坐标;</span><br><span class="line"><span class="attr">x2</span>: 结束点的横坐标;</span><br><span class="line"><span class="attr">y2</span>: 结束点的纵坐标;</span><br><span class="line"><span class="attr">radius</span>: 半径;</span><br></pre></td></tr></table></figure><ul><li><p>其中，<code>(cx, cy)</code> 也叫控制点，<code>(x2, y2)</code> 也叫结束点。</p></li><li><p>是不是有点奇怪，为什么没有 <code>x1</code> 和 <code>y1</code> ？</p><ul><li>(x1, y1)<code>是开始点，通常是由</code>moveTo()<code>或者</code>lineTo()&#96; 提供。</li></ul></li><li><p>绘制 30 度的弧线</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;400&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">arc</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">0</span>, (<span class="number">30</span> * <span class="title class_">Math</span>.<span class="property">PI</span>) / <span class="number">180</span>, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>下面用<code>arcTo</code>方法绘制的不知道多少度,可以用数学算算</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;c&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">width</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;c&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">moveTo</span>(<span class="number">40</span>, <span class="number">40</span>);</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">arcTo</span>(<span class="number">120</span>, <span class="number">40</span>, <span class="number">120</span>, <span class="number">120</span>, <span class="number">80</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>开始点即为<code>(40,40)</code></li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081320231.png"></p><h1 id="样式设置"><a href="#样式设置" class="headerlink" title="样式设置"></a>样式设置</h1><h2 id="stroke-描边"><a href="#stroke-描边" class="headerlink" title="stroke(描边)"></a>stroke(描边)</h2><ul><li>绘制描边线条</li></ul><h2 id="lineWidth-设置线条宽度"><a href="#lineWidth-设置线条宽度" class="headerlink" title="lineWidth(设置线条宽度)"></a>lineWidth(设置线条宽度)</h2><ul><li>lineWidth &#x3D; 值 + 单位</li><li>设置绘制的线条宽度,默认单位为 px,默认值为 1</li></ul><h2 id="strokeStyle-描边颜色"><a href="#strokeStyle-描边颜色" class="headerlink" title="strokeStyle(描边颜色)"></a>strokeStyle(描边颜色)</h2><ul><li>strokeStyle &#x3D; 颜色值</li></ul><h2 id="lineCap-设置线帽"><a href="#lineCap-设置线帽" class="headerlink" title="lineCap(设置线帽)"></a>lineCap(设置线帽)</h2><ul><li><p>lineCap &#x3D; 值</p></li><li><p><code>butt</code>: 默认值，无线帽</p></li><li><p><code>square</code>: 方形线帽</p></li><li><p><code>round</code>: 圆形线帽</p></li></ul><h2 id="lineJoin-拐角样式"><a href="#lineJoin-拐角样式" class="headerlink" title="lineJoin(拐角样式)"></a>lineJoin(拐角样式)</h2><ul><li>lineJoin &#x3D; 值</li></ul><ul><li><code>miter</code>: 默认值，尖角</li><li><code>round</code>: 圆角</li><li><code>bevel</code>: 斜角</li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081328312.png"></p><h2 id="setLineDash-设置描边虚线"><a href="#setLineDash-设置描边虚线" class="headerlink" title="setLineDash(设置描边虚线)"></a>setLineDash(设置描边虚线)</h2><ul><li><code>setLineDash([])</code>传入数组,且元素是数值型</li><li>只传 1 个值代表空白值(单位为 px)</li><li>有 2 个值代表线条值,空白值,</li><li>有 3 个以上的值线条值,空白值,线条值依次轮的去</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;400&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//基础样式</span></span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="property">strokeStyle</span> = <span class="string">&quot;blue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="property">lineWidth</span> = <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">moveTo</span>(<span class="number">10</span>, <span class="number">10</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">lineTo</span>(<span class="number">290</span>, <span class="number">10</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//设置空白值为10(也就是间隔10px)</span></span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">setLineDash</span>([<span class="number">10</span>]);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//设置线条长度为10px，空白值为5px</span></span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">setLineDash</span>([<span class="number">10</span>, <span class="number">5</span>]);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">moveTo</span>(<span class="number">10</span>, <span class="number">40</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">lineTo</span>(<span class="number">290</span>, <span class="number">40</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//设置线条长度为10px，空白值为5px,线条长度为20px，空白值为30px,线条长度为40px，空白值为50px</span></span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">setLineDash</span>([<span class="number">10</span>, <span class="number">5</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>]);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">moveTo</span>(<span class="number">10</span>, <span class="number">70</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">lineTo</span>(<span class="number">290</span>, <span class="number">70</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081340167.png"></p><h2 id="fill-填充"><a href="#fill-填充" class="headerlink" title="fill(填充)"></a>fill(填充)</h2><ul><li>使用 <code>fill()</code> 可以填充图形</li><li>可以使用 <code>fillStyle</code> 设置填充颜色，默认是黑色。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;c&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">width</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;c&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="property">fillStyle</span> = <span class="string">&quot;pink&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">rect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081341137.png"></p><h1 id="非零环绕填充"><a href="#非零环绕填充" class="headerlink" title="非零环绕填充"></a>非零环绕填充</h1><ul><li><p>如果需要判断某一个区域是否需要填充颜色. 就从该区域中随机的选取一个点。从这个点拉一条直线出来, 一定要拉到图形的外面. 此时以该点为圆心。看穿过拉出的直线的线段. 如果是顺时针方向就记为 +1, 如果是 逆时针方向，就记为 -1. 最终看求和的结果. 如果是 0 就不填充. 如果是 <strong>非零</strong> 就填充(注意是非 0,而不是负数)</p></li><li><p>代码</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">moveTo</span>(<span class="number">100</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">lineTo</span>(<span class="number">300</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">lineTo</span>(<span class="number">300</span>, <span class="number">300</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">lineTo</span>(<span class="number">100</span>, <span class="number">300</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//内部的</span></span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">moveTo</span>(<span class="number">150</span>, <span class="number">150</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">lineTo</span>(<span class="number">150</span>, <span class="number">250</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">lineTo</span>(<span class="number">250</span>, <span class="number">250</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">lineTo</span>(<span class="number">250</span>, <span class="number">150</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081349866.png"></p><ul><li><strong>大的正方形绘制的方向是顺时针，小的正发形绘制的方向是逆时针(因为没有调用 beginPath())</strong></li><li>小的从内部出来一根线,自身为-1,外界为 1 相加为 0,所以不填充,而大的从内部出来一根线,自身为 1,无相交,相加为 1,所以填充</li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081350304.png"></p><ul><li>可以看下面图像<ul><li>1 处:出来一条线,顺时针,没有相交,相加为 1,所以填充了颜色</li><li>2 处:出来 2 条线,逆时针,相加-2,不为 0,所以填充</li><li>3 处:出来 2 条线,-1+1 等于 0,为 0,所以不填充</li></ul></li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081346839.png"></p><ul><li>更详细可以看这个博客<ul><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/youthBlog/p/10019537.html">https://www.cnblogs.com/youthBlog/p/10019537.html</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44823731/article/details/106008247">https://blog.csdn.net/weixin_44823731/article/details/106008247</a></li></ul></li></ul><h1 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h1><h2 id="strokeText-描边文本和设置文本样式"><a href="#strokeText-描边文本和设置文本样式" class="headerlink" title="strokeText()描边文本和设置文本样式"></a>strokeText()描边文本和设置文本样式</h2><ul><li>和 <code>CSS</code> 设置 <code>font</code> 差不多，<code>Canvas</code> 也可以通过 <code>font</code> 设置样式。</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cxt<span class="selector-class">.font</span> = &#x27;<span class="attribute">font-style</span> <span class="attribute">font-variant</span> <span class="attribute">font-weight</span> <span class="attribute">font-size</span>/<span class="attribute">line-height</span> <span class="attribute">font-family</span>&#x27;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">如果需要设置字号 <span class="attribute">font-size</span>，需要同时设置 <span class="attribute">font-family</span>。</span><br><span class="line"></span><br><span class="line">cxt<span class="selector-class">.font</span> = &#x27;<span class="number">30px</span> 宋体&#x27;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="property">font</span> = <span class="string">&quot;60px 宋体&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">strokeText</span>(<span class="string">&quot;你好,世界&quot;</span>, <span class="number">10</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081403650.png"></p><ul><li>当然,你也可以设置描边颜色<code>strokeStyle</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="property">font</span> = <span class="string">&quot;60px 宋体&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="property">strokeStyle</span> = <span class="string">&quot;blue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">strokeText</span>(<span class="string">&quot;你好,世界&quot;</span>, <span class="number">10</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081404649.png"></p><h2 id="fillText-填充文本和-fillStyle-填充颜色"><a href="#fillText-填充文本和-fillStyle-填充颜色" class="headerlink" title="fillText-填充文本和 fillStyle-填充颜色"></a>fillText-填充文本和 fillStyle-填充颜色</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="property">font</span> = <span class="string">&quot;60px 宋体&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="property">strokeStyle</span> = <span class="string">&quot;blue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ctx.strokeText(&quot;你好,世界&quot;, 10, 100);</span></span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="property">fillStyle</span> = <span class="string">&quot;red&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">fillText</span>(<span class="string">&quot;你好,世界&quot;</span>, <span class="number">10</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081415747.png"></p><h2 id="measureText-获取文本信息"><a href="#measureText-获取文本信息" class="headerlink" title="measureText() - 获取文本信息"></a>measureText() - 获取文本信息</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="property">font</span> = <span class="string">&quot;60px 宋体&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="property">strokeStyle</span> = <span class="string">&quot;blue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ctx.strokeText(&quot;你好,世界&quot;, 10, 100);</span></span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="property">fillStyle</span> = <span class="string">&quot;red&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> text = <span class="string">&quot;你好,世界&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">fillText</span>(text, <span class="number">10</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(ctx.<span class="title function_">measureText</span>(text));</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;actualBoundingBoxAscent&quot;</span><span class="punctuation">:</span> <span class="number">49</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;actualBoundingBoxDescent&quot;</span><span class="punctuation">:</span> <span class="number">7</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;actualBoundingBoxLeft&quot;</span><span class="punctuation">:</span> <span class="number">-2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;actualBoundingBoxRight&quot;</span><span class="punctuation">:</span> <span class="number">268</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;alphabeticBaseline&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fontBoundingBoxAscent&quot;</span><span class="punctuation">:</span> <span class="number">52</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fontBoundingBoxDescent&quot;</span><span class="punctuation">:</span> <span class="number">8</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;hangingBaseline&quot;</span><span class="punctuation">:</span> <span class="number">41.6</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;ideographicBaseline&quot;</span><span class="punctuation">:</span> <span class="number">-8</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;width&quot;</span><span class="punctuation">:</span> <span class="number">270</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="textAlign-水平对齐方式"><a href="#textAlign-水平对齐方式" class="headerlink" title="textAlign 水平对齐方式"></a>textAlign 水平对齐方式</h2><p>使用 <code>textAlign</code> 属性可以设置文字的水平对齐方式，一共有 5 个值可选</p><ul><li><code>start</code>: 默认。在指定位置的横坐标开始。</li><li><code>end</code>: 在指定坐标的横坐标结束。</li><li><code>left</code>: 左对齐。</li><li><code>right</code>: 右对齐。</li><li><code>center</code>: 居中对齐。</li></ul><ul><li>从上面的例子看，<code>start</code> 和 <code>left</code> 的效果好像是一样的，<code>end</code> 和 <code>right</code> 也好像是一样的。</li><li>在大多数情况下，它们的确一样。但在某些国家或者某些场合(比如阿拉伯)，阅读文字的习惯是 <strong>从右往左</strong> 时，<code>start</code> 就和 <code>right</code> 一样了，<code>end</code> 和 <code>left</code> 也一样。这是需要注意的地方。</li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081457969.png"></p><h2 id="textBaseline-垂直对齐方式"><a href="#textBaseline-垂直对齐方式" class="headerlink" title="textBaseline 垂直对齐方式"></a>textBaseline 垂直对齐方式</h2><ul><li><p>使用 <code>textBaseline</code> 属性可以设置文字的垂直对齐方式。</p></li><li><p>在使用 <code>textBaseline</code> 前，需要自行了解 <code>css</code> 的文本基线。</p></li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081458866.png"></p><ul><li><strong><code>textBaseline</code> 可选属性：</strong><ul><li><code>alphabetic</code>: 默认。文本基线是普通的字母基线。</li><li><code>top</code>: 文本基线是 <code>em</code> 方框的顶端。</li><li><code>bottom</code>: 文本基线是 <code>em</code> 方框的底端。</li><li><code>middle</code>: 文本基线是 <code>em</code> 方框的正中。</li><li><code>hanging</code>: 文本基线是悬挂基线。</li></ul></li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081458691.png"></p><h1 id="drawImage-渲染图片"><a href="#drawImage-渲染图片" class="headerlink" title="drawImage-渲染图片"></a>drawImage-渲染图片</h1><ul><li>渲染图片的方式有 2 中，一种是<strong>在 JS 里加载图片再渲染</strong>，另一种是<strong>把 DOM 里的图片拿到 <code>canvas</code> 里渲染</strong>。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">drawImage</span>(image, dx, dy, dw, dh);</span><br></pre></td></tr></table></figure><ul><li><code>image</code>: 要渲染的图片对象。</li><li><code>dx</code>: <code>image</code> 的左上角在目标画布上 X 轴坐标</li><li><code>dy</code>: <code>image</code> 的左上角在目标画布上 Y 轴坐标。</li><li><code>dw</code> 用来定义图片的宽度。(不填则默认图片宽度)</li><li><code>dh</code> 定义图片的高度。(不填则默认图片高度)</li></ul><h2 id="js-方式"><a href="#js-方式" class="headerlink" title="js 方式"></a>js 方式</h2><ul><li>在 <code>JS</code> 里加载图片并渲染，有以下几个步骤：</li></ul><ol><li>创建 <code>Image</code> 对象</li><li>引入图片</li><li>等待图片加载完成(<strong>必须</strong>)</li><li>使用 <code>drawImage()</code> 方法渲染图片</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;800&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;500&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> image = <span class="keyword">new</span> <span class="title class_">Image</span>();</span></span><br><span class="line"><span class="language-javascript">    image.<span class="property">src</span> = <span class="string">&quot;https://s2.loli.net/2024/03/08/FmvSfs5TeZh4Bcq.png&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    image.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//等待图片加载完成</span></span></span><br><span class="line"><span class="language-javascript">      ctx.<span class="title function_">drawImage</span>(image, <span class="number">30</span>, <span class="number">30</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081519299.png"></p><h2 id="DOM-方式"><a href="#DOM-方式" class="headerlink" title="DOM 方式"></a>DOM 方式</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://s2.loli.net/2024/03/08/FmvSfs5TeZh4Bcq.png&quot;</span> <span class="attr">id</span>=<span class="string">&quot;cimg&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;800&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;500&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> cimgDOM = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cimg&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">drawImage</span>(cimgDOM, <span class="number">30</span>, <span class="number">30</span>);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081522482.png"></p><h2 id="设置图片宽高"><a href="#设置图片宽高" class="headerlink" title="设置图片宽高"></a>设置图片宽高</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drawImage(image, dx, dy, dw, dh)</span><br></pre></td></tr></table></figure><p><code>image、 dx、 dy</code> 的用法和前面一样。</p><p><code>dw</code> 用来定义图片的宽度，<code>dh</code> 定义图片的高度。</p><h2 id="截取图片"><a href="#截取图片" class="headerlink" title="截取图片"></a>截取图片</h2><ul><li>又多了参数..</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh)</span><br></pre></td></tr></table></figure><ul><li><code>image</code>: 图片对象</li><li><code>dx</code>: 开始截取的横坐标</li><li><code>dy</code>: 开始截取的纵坐标</li><li><code>dw</code>: 截取的宽度</li><li><code>dh</code>: 截取的高度</li><li><code>sx</code>: 图片左上角的横坐标位置</li><li><code>sy</code>: 图片左上角的纵坐标位置</li><li><code>sw</code>: 图片宽度</li><li><code>sh</code>: 图片高度</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;400&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;400&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> image = <span class="keyword">new</span> <span class="title class_">Image</span>();</span></span><br><span class="line"><span class="language-javascript">    image.<span class="property">src</span> = <span class="string">&quot;https://s2.loli.net/2024/03/08/FmvSfs5TeZh4Bcq.png&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    image.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//从图像的 (10,10) 位置开始剪切，剪切的大小为 120x300，然后在画布的 (20,30) 位置放置图像，缩放图像的大小为 100x200。</span></span></span><br><span class="line"><span class="language-javascript">      ctx.<span class="title function_">drawImage</span>(image, <span class="number">10</span>, <span class="number">10</span>, <span class="number">120</span>, <span class="number">300</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">100</span>, <span class="number">200</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081538131.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const canvas = document.getElementById(&quot;canvas&quot;); const ctx =</span><br><span class="line">canvas.getContext(&quot;2d&quot;); const image = document.getElementById(&quot;source&quot;);</span><br><span class="line">image.addEventListener(&quot;load&quot;, (e) =&gt; &#123; ctx.drawImage(image, 33, 71, 104, 124,</span><br><span class="line">21, 20, 87, 104); &#125;);</span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403081539853.png"></p><h1 id="使用-html2canvas"><a href="#使用-html2canvas" class="headerlink" title="使用 html2canvas"></a>使用 html2canvas</h1><ul><li>很多情况下我们需要动态生成分享图片,很多情况下我们使用的是这个<code>html2canvas</code>的库</li></ul><h2 id="图片为空白"><a href="#图片为空白" class="headerlink" title="图片为空白"></a>图片为空白</h2><ul><li><p>空白大部分情况是下面几种原因</p><ul><li>跨域<ul><li>解决,后端解决</li></ul></li><li>使用的是网络图片<ul><li>解决办法看下面</li></ul></li><li>图片未加载完成就调用了方法<ul><li>解决,等待图片加载完成后调用</li></ul></li><li>滚动条的一些问题啥的<ul><li>解决:略</li></ul></li></ul></li><li><p>一般情况下,如果是本地引入的图片,不依赖于网络,是可以正常加载的</p></li><li><p>但是大部分的时候,我们使用的图片都是网络图片,也就是 http 或者 https 开头的图片,会出现图片为空白的情况</p></li><li><p>也就是将 proxy 设置为和图片一样的地址</p></li></ul><h2 id="终极解决-后端设置允许跨域"><a href="#终极解决-后端设置允许跨域" class="headerlink" title="终极解决-后端设置允许跨域"></a>终极解决-后端设置允许跨域</h2><ul><li><p><strong>后端开启跨域,然后前端 html2canvas 配置参数中的 useCORS 设置为 true,或者你可以试试看 html2canvas 配置项的 proxy 功能</strong></p><ul><li><p>如果是需要使用 html2canvas 的话,必须要后端设置允许跨域</p></li><li><p>下面代码图床设置为了跨域,所以 canvas 渲染没问题</p></li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;main&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;width: 500px;height: 500px;display: flex;border: 1px solid red;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">&quot;width: 90%;height: 90%;&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">&quot;https://oss.ypggb.com/i/2025/07/01/pk754a.jpg&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 20px;&quot;</span>&gt;</span>大家好,我是文字<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;clickme&quot;</span>&gt;</span>点击我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> html2canvas <span class="keyword">from</span> <span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/html2canvas/1.4.1/html2canvas.esm.min.js&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;clickme&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">html2canvas</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#main&quot;</span>), &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">useCORS</span>: <span class="literal">true</span>, <span class="comment">// 【重要】开启跨域配置</span></span></span><br><span class="line"><span class="language-javascript">      &#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">canvas</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">append</span>(canvas);</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><ul><li>学习文章<ul><li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1356175">https://cloud.tencent.com/developer/article/1356175</a></li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;wrapper&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;position: relative;width: 600px;height: 500px;background-color: red;background-image: url(&#x27;./image/bg.jpg&#x27;);&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span></span></span><br><span class="line"><span class="tag">      <span class="attr">id</span>=<span class="string">&quot;time&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">&quot;color: blue;position: absolute;bottom: 0;font-size: 30px;left: 50%;transform: translateX(-50%);&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnDown&quot;</span>&gt;</span>下载<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> html2canvas <span class="keyword">from</span> <span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/html2canvas/1.4.1/html2canvas.esm.min.js&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">dataURLtoBlob</span>(<span class="params">dataurl</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> arr = dataurl.<span class="title function_">split</span>(<span class="string">&quot;,&quot;</span>),</span></span><br><span class="line"><span class="language-javascript">        mime = arr[<span class="number">0</span>].<span class="title function_">match</span>(<span class="regexp">/:(.*?);/</span>)[<span class="number">1</span>],</span></span><br><span class="line"><span class="language-javascript">        bstr = <span class="title function_">atob</span>(arr[<span class="number">1</span>]),</span></span><br><span class="line"><span class="language-javascript">        n = bstr.<span class="property">length</span>,</span></span><br><span class="line"><span class="language-javascript">        u8arr = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(n);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">while</span> (n--) &#123;</span></span><br><span class="line"><span class="language-javascript">        u8arr[n] = bstr.<span class="title function_">charCodeAt</span>(n);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Blob</span>([u8arr], &#123; <span class="attr">type</span>: mime &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">downFile</span>(<span class="params">url</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;a&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      a.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      a.<span class="property">download</span> = <span class="string">&quot;xx&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      a.<span class="property">href</span> = url;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(a);</span></span><br><span class="line"><span class="language-javascript">      a.<span class="title function_">click</span>();</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(a);</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">       * download: HTML5新增的属性</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">       * url: 属性的地址必须是非跨域的地址</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">       */</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> timeDOM = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#time&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      timeDOM.<span class="property">textContent</span> = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toLocaleString</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#btnDown&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> shareContent = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;wrapper&quot;</span>); <span class="comment">//需要截图的包裹的（原生的）DOM 对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> width = shareContent.<span class="property">offsetWidth</span>; <span class="comment">//获取dom 宽度</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> height = shareContent.<span class="property">offsetHeight</span>; <span class="comment">//获取dom 高度</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;canvas&quot;</span>); <span class="comment">//创建一个canvas节点</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> scale = <span class="number">1</span>; <span class="comment">//定义任意放大倍数 支持小数</span></span></span><br><span class="line"><span class="language-javascript">      canvas.<span class="property">width</span> = width * scale; <span class="comment">//定义canvas 宽度 * 缩放</span></span></span><br><span class="line"><span class="language-javascript">      canvas.<span class="property">height</span> = height * scale; <span class="comment">//定义canvas高度 *缩放</span></span></span><br><span class="line"><span class="language-javascript">      canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>).<span class="title function_">scale</span>(scale, scale); <span class="comment">//获取context,设置scale</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// var rect = shareContent.getBoundingClientRect();//获取元素相对于视察的偏移量</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// canvas.getContext(&quot;2d&quot;).translate(-rect.left,-rect.top);//设置context位置，值为相对于视窗的偏移量负值，让图片复位</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> opts = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">scale</span>: scale, <span class="comment">// 添加的scale 参数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">canvas</span>: canvas, <span class="comment">//自定义 canvas</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">logging</span>: <span class="literal">true</span>, <span class="comment">//日志开关</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">width</span>: width, <span class="comment">//dom 原始宽度</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">height</span>: height, <span class="comment">//dom 原始高度</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">backgroundColor</span>: <span class="string">&quot;transparent&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">html2canvas</span>(shareContent, opts).<span class="title function_">then</span>(<span class="function">(<span class="params">canvas</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> base64 = canvas.<span class="title function_">toDataURL</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> blob = <span class="title function_">dataURLtoBlob</span>(base64);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> href = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">downFile</span>(href, <span class="string">&quot;test.png&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403091449135.png"></p><h1 id="动态生成分享图片"><a href="#动态生成分享图片" class="headerlink" title="动态生成分享图片"></a>动态生成分享图片</h1><ul><li>常见的方法使用 canvas 绘制全部图像,进行布局(大部分时候是小程序,好像是因为内部请求图片方式不同)<ul><li>这里推荐几个社区看的库</li><li>小程序:<a target="_blank" rel="noopener" href="https://github.com/Kujiale-Mobile/Painter">https://github.com/Kujiale-Mobile/Painter</a></li><li>uniapp:<a target="_blank" rel="noopener" href="https://ext.dcloud.net.cn/plugin?id=13451">https://ext.dcloud.net.cn/plugin?id=13451</a></li><li>或者直接使用微信小程序官方推出的新 api 名叫<code>Snapshot</code>(2024 年 3 月 09 日-目前仅在 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/runtime/skyline/introduction.html">Skyline 渲染引擎</a> 下支持)<ul><li><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/skyline/Snapshot.html">https://developers.weixin.qq.com/miniprogram/dev/api/skyline/Snapshot.html</a></li><li><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/snapshot.html">https://developers.weixin.qq.com/miniprogram/dev/component/snapshot.html</a></li><li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/GOzwCBpnzn51R-TBDbf2Ag">https://mp.weixin.qq.com/s/GOzwCBpnzn51R-TBDbf2Ag</a></li></ul></li><li>或者使用微信小程序的 canvas 手动画<ul><li><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/ability/canvas.html">https://developers.weixin.qq.com/miniprogram/dev/framework/ability/canvas.html</a></li></ul></li></ul></li><li>还有的可能先写好 html 代码结构,后使用 html2canvas 进行转图片<ul><li>pc 端,移动端最常用了</li></ul></li><li>以下面这幅图为例子</li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403091901711.png"></p><h2 id="微信小程序生成-使用-snapshot-绘制"><a href="#微信小程序生成-使用-snapshot-绘制" class="headerlink" title="微信小程序生成-使用 snapshot 绘制"></a>微信小程序生成-使用 snapshot 绘制</h2><ul><li>snapshot 绘制需要 Skyline 模式下运行</li><li>代码片段<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/s/XOgihzmf7kPR">https://developers.weixin.qq.com/s/XOgihzmf7kPR</a></li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403092010140.gif"></p><ul><li>wxml</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigation-bar</span></span></span><br><span class="line"><span class="tag">  <span class="attr">title</span>=<span class="string">&quot;Weixin&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">back</span>=<span class="string">&quot;&#123;&#123;false&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">color</span>=<span class="string">&quot;black&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">background</span>=<span class="string">&quot;#FFF&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">navigation-bar</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span> <span class="attr">show</span>=<span class="string">&quot;&#123;&#123; show &#125;&#125;&quot;</span> <span class="attr">bind:close</span>=<span class="string">&quot;onClose&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">snapshot</span> <span class="attr">class</span>=<span class="string">&quot;share&quot;</span> <span class="attr">id</span>=<span class="string">&quot;downloadWrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 用户基本信息 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;share_info&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;avatar&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;info.avatar&#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;desc&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;name&quot;</span>&gt;</span>&#123;&#123;info.name&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>&#123;&#123;info.description&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 分享背景 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;share_bg&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;pic&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;info.bgURL&#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 二维码和价格 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;share_code&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span>&#123;&#123;&#x27;$&#x27; + info.price&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;code&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;pic&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;info.codeURL&#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">snapshot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bind:tap</span>=<span class="string">&quot;handleDownload&quot;</span>&gt;</span>点击下载<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bind:click</span>=<span class="string">&quot;showPopup&quot;</span>&gt;</span>点击我生成海报<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>index.js</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">getApp</span>();</span><br><span class="line"></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">show</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">info</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;梦洁&quot;</span>, <span class="comment">//用户名称</span></span><br><span class="line">      <span class="attr">description</span>: <span class="string">&quot;给你推荐了一个好东西&quot;</span>, <span class="comment">//描述</span></span><br><span class="line">      <span class="attr">avatar</span>: <span class="string">&quot;https://s2.loli.net/2024/03/09/8tey3JKxCIpg4c7.png&quot;</span>, <span class="comment">//头像</span></span><br><span class="line">      <span class="attr">codeURL</span>: <span class="string">&quot;https://s2.loli.net/2024/03/09/924jbZViXRUngOh.png&quot;</span>, <span class="comment">//二维码</span></span><br><span class="line">      <span class="attr">bgURL</span>: <span class="string">&quot;https://s2.loli.net/2024/03/09/QhupvOzgwGmcY58.jpg&quot;</span>, <span class="comment">//背景图</span></span><br><span class="line">      <span class="attr">price</span>: <span class="string">&quot;29.99&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">      <span class="string">&quot;代码片段是一种迷你、可分享的小程序或小游戏项目，可用于分享小程序和小游戏的开发经验、展示组件和 API 的使用、复现开发问题和 Bug 等。可点击以下链接查看代码片段的详细文档：&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">      <span class="string">&quot;https://developers.weixin.qq.com/miniprogram/dev/devtools/minicode.html&quot;</span></span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">showPopup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">show</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onClose</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//点击下载</span></span><br><span class="line">  <span class="title function_">handleDownload</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">createSelectorQuery</span>()</span><br><span class="line">      .<span class="title function_">select</span>(<span class="string">&quot;#downloadWrapper&quot;</span>)</span><br><span class="line">      .<span class="title function_">node</span>()</span><br><span class="line">      .<span class="title function_">exec</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> node = res[<span class="number">0</span>].<span class="property">node</span>;</span><br><span class="line">        <span class="comment">//保存海报</span></span><br><span class="line">        node.<span class="title function_">takeSnapshot</span>(&#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&quot;arraybuffer&quot;</span>,</span><br><span class="line">          <span class="attr">format</span>: <span class="string">&quot;png&quot;</span>,</span><br><span class="line">          <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">//不让背景透明,就简单点改了下扩展名</span></span><br><span class="line">            <span class="keyword">const</span> filePath = <span class="string">`<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">              wx.env.USER_DATA_PATH</span></span></span><br><span class="line"><span class="subst"><span class="string">            &#125;</span>/生成的图片<span class="subst">$&#123;<span class="built_in">Math</span>.random()&#125;</span>.jpg`</span>;</span><br><span class="line">            <span class="keyword">const</span> fs = wx.<span class="title function_">getFileSystemManager</span>();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//将海报数据写入本地文件</span></span><br><span class="line">            fs.<span class="title function_">writeFileSync</span>(filePath, res.<span class="property">data</span>, <span class="string">&quot;binary&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//保存到本地</span></span><br><span class="line">            wx.<span class="title function_">saveImageToPhotosAlbum</span>(&#123;</span><br><span class="line">              filePath,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">error</span>: <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`出错了<span class="subst">$&#123;e&#125;</span>`</span>);</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>index.wxss<ul><li>样式就将就点吧</li></ul></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* page &#123;</span></span><br><span class="line"><span class="comment">  display: flex;</span></span><br><span class="line"><span class="comment">  flex-direction: column;</span></span><br><span class="line"><span class="comment">  height: 100vh;</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.scroll-area</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">overflow-y</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.intro</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.share</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1</span>rpx solid red;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100vw</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">60vh</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.share_info</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.desc</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.name</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.text</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: gray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.share_bg</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.share_code</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.code</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.code</span> <span class="selector-class">.pic</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">160</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">160</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-html2canvas-进行转图片"><a href="#使用-html2canvas-进行转图片" class="headerlink" title="使用 html2canvas 进行转图片"></a>使用 html2canvas 进行转图片</h2><ul><li>先写好 html 代码结构</li><li>必须要允许跨域</li><li>以 react 函数式组件为例</li><li>主入口</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@mui/material&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Share</span> <span class="keyword">from</span> <span class="string">&quot;./component/share&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Index</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [open, setOpen] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setOpen(true)&#125;&gt;点击我分享<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/*  分享组件 */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;open &amp;&amp; <span class="tag">&lt;<span class="name">Share</span> <span class="attr">close</span>=<span class="string">&#123;()</span> =&gt;</span> setOpen(false)&#125; /&gt;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Index</span>;</span><br></pre></td></tr></table></figure><ul><li>share.jsx 组件</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useRef, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Modal</span> &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> html2canvas <span class="keyword">from</span> <span class="string">&quot;html2canvas&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./share.less&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Share</span> = (<span class="params">&#123; close &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [info, setInfo] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;梦洁&quot;</span>, <span class="comment">//用户名称</span></span><br><span class="line">    <span class="attr">description</span>: <span class="string">&quot;给你推荐了一个好东西&quot;</span>, <span class="comment">//描述</span></span><br><span class="line">    <span class="attr">avatar</span>: <span class="string">&quot;https://s2.loli.net/2024/03/09/8tey3JKxCIpg4c7.png&quot;</span>, <span class="comment">//头像</span></span><br><span class="line">    <span class="attr">codeURL</span>: <span class="string">&quot;https://s2.loli.net/2024/03/09/924jbZViXRUngOh.png&quot;</span>, <span class="comment">//二维码</span></span><br><span class="line">    <span class="attr">bgURL</span>: <span class="string">&quot;https://s2.loli.net/2024/03/09/QhupvOzgwGmcY58.jpg&quot;</span>, <span class="comment">//背景图</span></span><br><span class="line">    <span class="attr">price</span>: <span class="string">&quot;29.99&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> wrapperRef = <span class="title function_">useRef</span>();</span><br><span class="line">  <span class="comment">//点击下载</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleDownload</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">html2canvas</span>(wrapperRef.<span class="property">current</span>, &#123;</span><br><span class="line">      <span class="attr">useCORS</span>: <span class="literal">true</span>, <span class="comment">//确保可以下载网络图片</span></span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">canvas</span>) =&gt;</span> &#123;</span><br><span class="line">      canvas.<span class="title function_">toBlob</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> url = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(data);</span><br><span class="line">        <span class="keyword">const</span> <span class="variable constant_">ADOM</span> = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        <span class="variable constant_">ADOM</span>.<span class="property">href</span> = url;</span><br><span class="line">        <span class="variable constant_">ADOM</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">        <span class="variable constant_">ADOM</span>.<span class="property">download</span> = <span class="string">&quot;&quot;</span>; <span class="comment">//避免在当前窗口打开</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(<span class="variable constant_">ADOM</span>);</span><br><span class="line">        <span class="variable constant_">ADOM</span>.<span class="title function_">click</span>();</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(<span class="variable constant_">ADOM</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Modal</span> <span class="attr">width</span>=<span class="string">&#123;</span>&quot;<span class="attr">375px</span>&quot;&#125; <span class="attr">open</span>=<span class="string">&#123;true&#125;</span> <span class="attr">footer</span>=<span class="string">&#123;null&#125;</span> <span class="attr">onCancel</span>=<span class="string">&#123;close&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;wrapperRef&#125;</span> <span class="attr">className</span>=<span class="string">&quot;share&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* 用户基本信息 */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;share_info&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">className</span>=<span class="string">&quot;avatar&quot;</span> <span class="attr">src</span>=<span class="string">&#123;info.avatar&#125;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;desc&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;name&quot;</span>&gt;</span>&#123;info.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;text&quot;</span>&gt;</span>&#123;info.description&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* 分享背景 */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;share_bg&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">src</span>=<span class="string">&#123;info.bgURL&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* 二维码和价格 */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;share_code&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;price&quot;</span>&gt;</span>&#123;&quot;$&quot; + info.price&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;code&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">src</span>=<span class="string">&#123;info.codeURL&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">textAlign:</span> &quot;<span class="attr">center</span>&quot; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Button</span> <span class="attr">type</span>=<span class="string">&#123;</span>&quot;<span class="attr">primary</span>&quot;&#125; <span class="attr">onClick</span>=<span class="string">&#123;handleDownload&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          点击下载</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Modal</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Share</span>;</span><br></pre></td></tr></table></figure><ul><li>这里为了方便截图,就用手机端进行操作了</li></ul><p><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403091634611.gif"></p><h1 id="基础知识点"><a href="#基础知识点" class="headerlink" title="基础知识点"></a>基础知识点</h1><ul><li>如果不在 <code>canvas</code> 上设置宽高，那 <code>canvas</code> 元素的默认宽度是 300px，默认高度是 150px。</li><li>线条的默认宽度是 <code>1px</code> ，默认颜色是黑色。<ul><li>但由于默认情况下 <code>canvas</code> 会将线条的中心点和像素的底部对齐，所以会导致显示效果是 <code>2px</code> 和非纯黑色问题。</li></ul></li><li>IE 兼容问题<ul><li>暂时只有 <code>IE 9</code> 以上才支持 <code>canvas</code> 。但好消息是 <code>IE</code> 已经有自己的墓碑了。</li><li>如需兼容 <code>IE 7 和 8</code> ，可以使用 <a target="_blank" rel="noopener" href="https://github.com/arv/explorercanvas">ExplorerCanvas </a>。但即使是使用了 <code>ExplorerCanvas</code> 仍然会有所限制，比如无法使用 <code>fillText()</code> 方法等。</li></ul></li></ul></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://www.dreamlove.top">梦洁</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://www.dreamlove.top/4f2816f0.html">https://www.dreamlove.top/4f2816f0.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.dreamlove.top" target="_blank">梦洁小站-属于你我的小天地</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/HTML/">HTML</a><a class="post-meta__tags" href="/tags/css/">css</a></div><div class="post_share"><div class="social-share" data-image="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403181529884.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://lib.baomitu.com/butterfly-extsrc/1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://lib.baomitu.com/butterfly-extsrc/1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/36fd9db3.html" title="前端SVG的学习"><img class="cover" src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403181531348.png" onerror='onerror=null,src="/img/404.png"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">前端SVG的学习</div></div></a></div><div class="next-post pull-right"><a href="/45513c12.html" title="React多个echarts图表在一个页面的使用"><img class="cover" src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403181528746.png" onerror='onerror=null,src="/img/404.png"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">React多个echarts图表在一个页面的使用</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/36fd9db3.html" title="前端SVG的学习"><img class="cover" src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403181531348.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-16</div><div class="title">前端SVG的学习</div></div></a></div><div><a href="/5dcd009d.html" title="使用backdrop-filter实现elementui官网的模糊滤镜效果的和毛玻璃效果"><img class="cover" src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202304101647316.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-25</div><div class="title">使用backdrop-filter实现elementui官网的模糊滤镜效果的和毛玻璃效果</div></div></a></div><div><a href="/75bf0d7.html" title="webpack构建工具的学习"><img class="cover" src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202205291452280.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-28</div><div class="title">webpack构建工具的学习</div></div></a></div><div><a href="/e4e505ca.html" title="使用vite的社区模板来创建对应的项目(比如React17,vue+electron)"><img class="cover" src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202304101645867.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-06</div><div class="title">使用vite的社区模板来创建对应的项目(比如React17,vue+electron)</div></div></a></div><div><a href="/e031a88b.html" title="前端面试可能会问到的知识点记录"><img class="cover" src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202207181536689.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-18</div><div class="title">前端面试可能会问到的知识点记录</div></div></a></div><div><a href="/4561a0ef.html" title="Echarts图表的基本使用"><img class="cover" src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202205162354315.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-16</div><div class="title">Echarts图表的基本使用</div></div></a></div></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="artalk-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://oss.ypggb.com/i/2025/07/01/pk26bw.png" onerror='this.onerror=null,this.src="/img/404.png"' alt="avatar"></div><div class="author-info__name">梦洁</div><div class="author-info__description">小小的字,有大大的梦想~分享我的前端学习过程,经历,错误,和一些其他折腾过程</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">182</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">101</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">73</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/superBiuBiuMan"><i class="fab fa-github"></i><span>关注下我(*￣▽￣*)</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:zmqdream@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">不断更新中,有问题请留言回复(会通过邮箱提醒~)</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87"><span class="toc-number">1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA-canvas"><span class="toc-number">2.</span> <span class="toc-text">第一个 canvas</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%8D%E8%83%BD%E9%80%9A%E8%BF%87-css-%E8%AE%BE%E7%BD%AE%E7%94%BB%E5%B8%83%E7%9A%84%E5%AE%BD%E9%AB%98"><span class="toc-number">3.</span> <span class="toc-text">不能通过 css 设置画布的宽高</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-number">4.</span> <span class="toc-text">坐标系</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%98%E5%88%B6%E7%9B%B4%E7%BA%BF"><span class="toc-number">5.</span> <span class="toc-text">绘制直线</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E6%A0%B7%E5%BC%8F"><span class="toc-number">5.1.</span> <span class="toc-text">设置样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BC%80%E8%B7%AF%E5%BE%84"><span class="toc-number">5.2.</span> <span class="toc-text">新开路径</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8A%98%E7%BA%BF-%E7%89%B9%E6%AE%8A%E7%9A%84%E7%9B%B4%E7%BA%BF"><span class="toc-number">6.</span> <span class="toc-text">折线(特殊的直线)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9F%A9%E5%BD%A2-rect"><span class="toc-number">7.</span> <span class="toc-text">矩形(rect)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A1%AB%E5%85%85%E7%9F%A9%E5%BD%A2"><span class="toc-number">7.1.</span> <span class="toc-text">填充矩形</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-rect"><span class="toc-number">7.2.</span> <span class="toc-text">使用 rect()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#clearRect"><span class="toc-number">7.3.</span> <span class="toc-text">clearRect()</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E8%BE%B9%E5%BD%A2"><span class="toc-number">8.</span> <span class="toc-text">多边形</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E8%A7%92%E5%BD%A2"><span class="toc-number">8.1.</span> <span class="toc-text">三角形</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#arc-%E5%9C%86"><span class="toc-number">9.</span> <span class="toc-text">arc 圆</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%A7%E7%BA%BF"><span class="toc-number">9.1.</span> <span class="toc-text">弧线</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E8%AE%BE%E7%BD%AE"><span class="toc-number">10.</span> <span class="toc-text">样式设置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#stroke-%E6%8F%8F%E8%BE%B9"><span class="toc-number">10.1.</span> <span class="toc-text">stroke(描边)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lineWidth-%E8%AE%BE%E7%BD%AE%E7%BA%BF%E6%9D%A1%E5%AE%BD%E5%BA%A6"><span class="toc-number">10.2.</span> <span class="toc-text">lineWidth(设置线条宽度)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#strokeStyle-%E6%8F%8F%E8%BE%B9%E9%A2%9C%E8%89%B2"><span class="toc-number">10.3.</span> <span class="toc-text">strokeStyle(描边颜色)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lineCap-%E8%AE%BE%E7%BD%AE%E7%BA%BF%E5%B8%BD"><span class="toc-number">10.4.</span> <span class="toc-text">lineCap(设置线帽)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lineJoin-%E6%8B%90%E8%A7%92%E6%A0%B7%E5%BC%8F"><span class="toc-number">10.5.</span> <span class="toc-text">lineJoin(拐角样式)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setLineDash-%E8%AE%BE%E7%BD%AE%E6%8F%8F%E8%BE%B9%E8%99%9A%E7%BA%BF"><span class="toc-number">10.6.</span> <span class="toc-text">setLineDash(设置描边虚线)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fill-%E5%A1%AB%E5%85%85"><span class="toc-number">10.7.</span> <span class="toc-text">fill(填充)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%9E%E9%9B%B6%E7%8E%AF%E7%BB%95%E5%A1%AB%E5%85%85"><span class="toc-number">11.</span> <span class="toc-text">非零环绕填充</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E6%9C%AC"><span class="toc-number">12.</span> <span class="toc-text">文本</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#strokeText-%E6%8F%8F%E8%BE%B9%E6%96%87%E6%9C%AC%E5%92%8C%E8%AE%BE%E7%BD%AE%E6%96%87%E6%9C%AC%E6%A0%B7%E5%BC%8F"><span class="toc-number">12.1.</span> <span class="toc-text">strokeText()描边文本和设置文本样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fillText-%E5%A1%AB%E5%85%85%E6%96%87%E6%9C%AC%E5%92%8C-fillStyle-%E5%A1%AB%E5%85%85%E9%A2%9C%E8%89%B2"><span class="toc-number">12.2.</span> <span class="toc-text">fillText-填充文本和 fillStyle-填充颜色</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#measureText-%E8%8E%B7%E5%8F%96%E6%96%87%E6%9C%AC%E4%BF%A1%E6%81%AF"><span class="toc-number">12.3.</span> <span class="toc-text">measureText() - 获取文本信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#textAlign-%E6%B0%B4%E5%B9%B3%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F"><span class="toc-number">12.4.</span> <span class="toc-text">textAlign 水平对齐方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#textBaseline-%E5%9E%82%E7%9B%B4%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F"><span class="toc-number">12.5.</span> <span class="toc-text">textBaseline 垂直对齐方式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#drawImage-%E6%B8%B2%E6%9F%93%E5%9B%BE%E7%89%87"><span class="toc-number">13.</span> <span class="toc-text">drawImage-渲染图片</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#js-%E6%96%B9%E5%BC%8F"><span class="toc-number">13.1.</span> <span class="toc-text">js 方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DOM-%E6%96%B9%E5%BC%8F"><span class="toc-number">13.2.</span> <span class="toc-text">DOM 方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%9B%BE%E7%89%87%E5%AE%BD%E9%AB%98"><span class="toc-number">13.3.</span> <span class="toc-text">设置图片宽高</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%88%AA%E5%8F%96%E5%9B%BE%E7%89%87"><span class="toc-number">13.4.</span> <span class="toc-text">截取图片</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-html2canvas"><span class="toc-number">14.</span> <span class="toc-text">使用 html2canvas</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E4%B8%BA%E7%A9%BA%E7%99%BD"><span class="toc-number">14.1.</span> <span class="toc-text">图片为空白</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%88%E6%9E%81%E8%A7%A3%E5%86%B3-%E5%90%8E%E7%AB%AF%E8%AE%BE%E7%BD%AE%E5%85%81%E8%AE%B8%E8%B7%A8%E5%9F%9F"><span class="toc-number">14.2.</span> <span class="toc-text">终极解决-后端设置允许跨域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-number">14.3.</span> <span class="toc-text">练习</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%94%9F%E6%88%90%E5%88%86%E4%BA%AB%E5%9B%BE%E7%89%87"><span class="toc-number">15.</span> <span class="toc-text">动态生成分享图片</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%94%9F%E6%88%90-%E4%BD%BF%E7%94%A8-snapshot-%E7%BB%98%E5%88%B6"><span class="toc-number">15.1.</span> <span class="toc-text">微信小程序生成-使用 snapshot 绘制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-html2canvas-%E8%BF%9B%E8%A1%8C%E8%BD%AC%E5%9B%BE%E7%89%87"><span class="toc-number">15.2.</span> <span class="toc-text">使用 html2canvas 进行转图片</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">16.</span> <span class="toc-text">基础知识点</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/31d04109.html" title="java枚举和mybaits-plus结合实现映射输出和存储">java枚举和mybaits-plus结合实现映射输出和存储</a><time datetime="2025-05-26T20:23:14.000Z" title="发表于 2025-05-26 20:23:14">2025-05-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/dc4ed705.html" title="qq农场,牧场解包查看导出swf文件内容图片"><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202503251433885.png" onerror='this.onerror=null,this.src="/img/404.png"' alt="qq农场,牧场解包查看导出swf文件内容图片"></a><div class="content"><a class="title" href="/dc4ed705.html" title="qq农场,牧场解包查看导出swf文件内容图片">qq农场,牧场解包查看导出swf文件内容图片</a><time datetime="2025-03-25T14:28:01.000Z" title="发表于 2025-03-25 14:28:01">2025-03-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/ed2e6c27.html" title="移动云盘加密分析-以链接有消息检查为例子"><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202503251433302.png" onerror='this.onerror=null,this.src="/img/404.png"' alt="移动云盘加密分析-以链接有消息检查为例子"></a><div class="content"><a class="title" href="/ed2e6c27.html" title="移动云盘加密分析-以链接有消息检查为例子">移动云盘加密分析-以链接有消息检查为例子</a><time datetime="2025-03-22T12:24:10.000Z" title="发表于 2025-03-22 12:24:10">2025-03-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/3cde95bc.html" title="mstsc使用proxifier走clash代理降低延迟"><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202503030912164.png" onerror='this.onerror=null,this.src="/img/404.png"' alt="mstsc使用proxifier走clash代理降低延迟"></a><div class="content"><a class="title" href="/3cde95bc.html" title="mstsc使用proxifier走clash代理降低延迟">mstsc使用proxifier走clash代理降低延迟</a><time datetime="2025-03-03T09:11:01.000Z" title="发表于 2025-03-03 09:11:01">2025-03-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/d6a2907d.html" title="适配FASTGPT基础AI模板-适合对付领导突发AI-奇想而生的模板"><img src="https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202502201550402.png" onerror='this.onerror=null,this.src="/img/404.png"' alt="适配FASTGPT基础AI模板-适合对付领导突发AI-奇想而生的模板"></a><div class="content"><a class="title" href="/d6a2907d.html" title="适配FASTGPT基础AI模板-适合对付领导突发AI-奇想而生的模板">适配FASTGPT基础AI模板-适合对付领导突发AI-奇想而生的模板</a><time datetime="2025-02-20T15:45:25.000Z" title="发表于 2025-02-20 15:45:25">2025-02-20</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(https://dreamos.oss-cn-beijing.aliyuncs.com/gitblog/202403181529884.png)"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2025 By 梦洁</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://lib.baomitu.com/fancyapps-ui/5.0.33/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(()=>{let t=null;const e=()=>{if(t=Artalk.init(Object.assign({el:"#artalk-wrap",server:"https://artalk.dreamlove.top",site:"梦洁小站",pageKey:location.pathname,darkMode:"dark"===document.documentElement.getAttribute("data-theme")},null)),"null"===GLOBAL_CONFIG.lightbox)return;t.on("list-loaded",()=>{t.ctx.get("list").getCommentNodes().forEach(t=>{const e=t.getRender().$content;btf.loadLightbox(e.querySelectorAll("img:not([atk-emoticon])"))})});btf.addGlobalFn("pjax",()=>{t.destroy()},"destroyArtalk")},a=async()=>{"object"==typeof Artalk||(await getCSS("https://lib.baomitu.com/artalk/2.8.2/Artalk.min.css"),await getScript("https://lib.baomitu.com/artalk/2.8.2/Artalk.min.js")),e()};btf.addGlobalFn("themeChange",e=>{const a=document.getElementById("artalk-wrap");if(!a||!a.children.length)return;const l="dark"===e;t.setDarkMode(l)},"artalk"),a()})()</script></div><script id="canvas_nest" defer color="0,0,255" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://lib.baomitu.com/butterfly-extsrc/1.1.3/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://lib.baomitu.com/algoliasearch/4.22.1/algoliasearch-lite.umd.min.js"></script><script src="https://lib.baomitu.com/instantsearch.js/4.65.0/instantsearch.production.min.js"></script><script src="/js/search/algolia.js?v=4.13.0"></script></div></div></body></html>