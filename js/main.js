document.addEventListener("DOMContentLoaded",function(){let c,i;let e=false;const t=t=>{const e=t=>{return Array.from(t).reduce((t,e)=>t+e.offsetWidth,0)};if(t){const o=e(document.querySelector("#blog-info > a").children);const s=e(document.getElementById("menus").children);c=o+s;i=document.getElementById("nav")}const n=window.innerWidth<=768||c>i.offsetWidth-120;i.classList.toggle("hide-menu",n)};const n=()=>{t(true);i.classList.add("show")};const o={open:()=>{btf.sidebarPaddingR();document.body.style.overflow="hidden";btf.animateIn(document.getElementById("menu-mask"),"to_show 0.5s");document.getElementById("sidebar-menus").classList.add("open");e=true},close:()=>{const t=document.body;t.style.overflow="";t.style.paddingRight="";btf.animateOut(document.getElementById("menu-mask"),"to_hide 0.5s");document.getElementById("sidebar-menus").classList.remove("open");e=false}};const s=()=>{const t=()=>{btf.scrollToDest(document.getElementById("content-inner").offsetTop,300)};const e=document.getElementById("scroll-down");e&&btf.addEventListenerPjax(e,"click",t)};const a=()=>{const t=GLOBAL_CONFIG.highlight;if(!t)return;const{highlightCopy:e,highlightLang:o,highlightHeightLimit:i,plugin:n}=t;const s=GLOBAL_CONFIG_SITE.isHighlightShrink;const a=e||o||s!==undefined;const c=n==="highlight.js"?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]');if(!((a||i)&&c.length))return;const l=n==="prismjs";const r=s===true?"closed":"";const d=s!==undefined?'<i class="fas fa-angle-down expand"></i>':"";const u=e?'<div class="copy-notice"></div><i class="fas fa-paste copy-button"></i>':"";const f=(t,e)=>{if(GLOBAL_CONFIG.Snackbar!==undefined){btf.snackbarShow(e)}else{const n=t.previousElementSibling;n.textContent=e;n.style.opacity=1;setTimeout(()=>{n.style.opacity=0},800)}};const m=t=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy")){document.execCommand("copy");f(t,GLOBAL_CONFIG.copy.success)}else{f(t,GLOBAL_CONFIG.copy.noSupport)}};const g=t=>{const e=t.parentNode;e.classList.add("copy-true");const n=window.getSelection();const o=document.createRange();const s=l?"pre code":"table .code pre";o.selectNodeContents(e.querySelectorAll(`${s}`)[0]);n.removeAllRanges();n.addRange(o);m(t.lastChild);n.removeAllRanges();e.classList.remove("copy-true")};const h=t=>{t.classList.toggle("closed")};const L=function(t){const e=t.target.classList;if(e.contains("expand"))h(this);else if(e.contains("copy-button"))g(this)};const p=function(){this.classList.toggle("expand-done")};const b=(t,e,n)=>{const o=document.createDocumentFragment();if(a){const s=document.createElement("div");s.className=`highlight-tools ${r}`;s.innerHTML=d+t+u;btf.addEventListenerPjax(s,"click",L);o.appendChild(s)}if(i&&e.offsetHeight>i+30){const c=document.createElement("div");c.className="code-expand-btn";c.innerHTML='<i class="fas fa-angle-double-down"></i>';btf.addEventListenerPjax(c,"click",p);o.appendChild(c)}if(n==="hl"){e.insertBefore(o,e.firstChild)}else{e.parentNode.insertBefore(o,e)}};if(l){c.forEach(t=>{if(o){const e=t.getAttribute("data-language")||"Code";const n=`<div class="code-lang">${e}</div>`;btf.wrap(t,"figure",{class:"highlight"});b(n,t)}else{btf.wrap(t,"figure",{class:"highlight"});b("",t)}})}else{c.forEach(e=>{if(o){let t=e.getAttribute("class").split(" ")[1];if(t==="plain"||t===undefined)t="Code";const n=`<div class="code-lang">${t}</div>`;b(n,e,"hl")}else{b("",e,"hl")}})}};const l=()=>{document.querySelectorAll("#article-container img").forEach(t=>{const e=t.title||t.alt;if(!e)return;const n=document.createElement("div");n.className="img-alt is-center";n.textContent=e;t.insertAdjacentElement("afterend",n)})};const r=()=>{btf.loadLightbox(document.querySelectorAll("#article-container img:not(.no-lightbox)"))};const d=async t=>{const e=await fetch(t);return await e.json()};const u=(s,l,c=false,t)=>{const r=l.length;const i=new InfiniteGrid.JustifiedInfiniteGrid(s,{gap:5,isConstantSize:true,sizeRange:[150,600],useResizeObserver:true,observeChildren:true,useTransform:true});if(t){btf.addGlobalFn("igOfTabs",()=>{i.destroy()},false,t)}const d=t=>t.replace(/"/g,"&quot;");const n=(t,n)=>{const o=[];const s=(t-1)*n;for(let e=0;e<n;++e){const c=s+e;if(c>=r){break}const t=l[c];const i=t.alt?`alt="${d(t.alt)}"`:"";const a=t.title?`title="${d(t.title)}"`:"";o.push(`<div class="item ">
            <img src="${t.url}" data-grid-maintained-target="true" ${i+a} />
          </div>`)}return o};const o=GLOBAL_CONFIG.infinitegrid.buttonText;const a=e=>{const t=document.createElement("button");t.textContent=o;const n=t=>{t.target.removeEventListener("click",n);t.target.remove();btf.setLoading.add(e);u(i.getGroups().length+1,10)};t.addEventListener("click",n);e.insertAdjacentElement("afterend",t)};const u=(t,e)=>{i.append(n(t,e),t)};const f=Math.ceil(r/10);const m=t=>{const{updated:e,isResize:n,mounted:o}=t;if(!e.length||!o.length||n){return}btf.loadLightbox(s.querySelectorAll("img:not(.medium-zoom-image)"));if(i.getGroups().length===f){btf.setLoading.remove(s);i.off("renderComplete",m);return}if(c){btf.setLoading.remove(s);a(s)}};const g=btf.debounce(t=>{const e=(+t.groupKey||0)+1;u(e,10);if(e===f){i.off("requestAppend",g)}},300);btf.setLoading.add(s);i.on("renderComplete",m);if(c){u(1,10)}else{i.on("requestAppend",g);i.renderItems()}btf.addGlobalFn("justifiedGallery",()=>{i.destroy()})};const f=async(i,a=false)=>{const t=async()=>{for(const t of i){if(btf.isHidden(t))continue;if(a&&t.classList.contains("loaded")){t.querySelector(".gallery-items").innerHTML="";const s=t.querySelector(":scope > button");const c=t.querySelector(":scope > .loading-container");s&&s.remove();c&&c.remove()}const e=t.getAttribute("data-button")==="true";const n=t.firstElementChild.textContent;t.classList.add("loaded");const o=t.getAttribute("data-type")==="url"?await d(n):JSON.parse(n);u(t.lastElementChild,o,e,a)}};if(typeof InfiniteGrid==="function"){t()}else{await getScript(`${GLOBAL_CONFIG.infinitegrid.js}`);t()}};const m=t=>{const e=btf.getScrollPercent(t,document.body);const n=document.getElementById("go-up");if(e<95){n.classList.add("show-percent");n.querySelector(".scroll-percent").textContent=e}else{n.classList.remove("show-percent")}};const g=()=>{const n=document.getElementById("rightside");const o=window.innerHeight+56;let s=0;const c=document.getElementById("page-header");const i=typeof chatBtn!=="undefined";const a=GLOBAL_CONFIG.percent.rightside;if(document.body.scrollHeight<=o){n.classList.add("rightside-show");return}const l=t=>{const e=t>s;s=t;return e};let r="";const t=btf.throttle(()=>{const t=window.scrollY||document.documentElement.scrollTop;const e=l(t);if(t>56){if(r===""){c.classList.add("nav-fixed");n.classList.add("rightside-show")}if(e){if(r!=="down"){c.classList.remove("nav-visible");i&&window.chatBtn.hide();r="down"}}else{if(r!=="up"){c.classList.add("nav-visible");i&&window.chatBtn.show();r="up"}}}else{r="";if(t===0){c.classList.remove("nav-fixed","nav-visible")}n.classList.remove("rightside-show")}a&&m(t);if(document.body.scrollHeight<=o){n.classList.add("rightside-show")}},300);btf.addEventListenerPjax(window,"scroll",t,{passive:true})};const h=()=>{const n=GLOBAL_CONFIG_SITE.isToc;const t=GLOBAL_CONFIG.isAnchor;const e=document.getElementById("article-container");if(!(e&&(n||t)))return;let i,a,l,o,r;if(n){const f=document.getElementById("card-toc");a=f.querySelector(".toc-content");i=a.querySelectorAll(".toc-link");o=f.querySelector(".toc-percentage");r=a.classList.contains("is-expand");const m=t=>{const e=t.target.closest(".toc-link");if(!e)return;t.preventDefault();btf.scrollToDest(btf.getEleTop(document.getElementById(decodeURI(e.getAttribute("href")).replace("#",""))),300);if(window.innerWidth<900){f.classList.remove("open")}};btf.addEventListenerPjax(a,"click",m);l=t=>{const e=t.getBoundingClientRect().top;const n=a.scrollTop;if(e>document.documentElement.clientHeight-100){a.scrollTop=n+150}if(e<100){a.scrollTop=n-150}}}const d=e.querySelectorAll("h1,h2,h3,h4,h5,h6");let u="";const s=o=>{if(o===0){return false}let s="";let c="";d.forEach((t,e)=>{if(o>btf.getEleTop(t)-80){const n=t.id;s=n?"#"+encodeURI(n):"";c=e}});if(u===c)return;if(t)btf.updateAnchor(s);u=c;if(n){a.querySelectorAll(".active").forEach(t=>{t.classList.remove("active")});if(s===""){return}const e=i[c];e.classList.add("active");setTimeout(()=>{l(e)},0);if(r)return;let t=e.parentNode;for(;!t.matches(".toc");t=t.parentNode){if(t.matches("li"))t.classList.add("active")}}};const c=btf.throttle(()=>{const t=window.scrollY||document.documentElement.scrollTop;if(n&&GLOBAL_CONFIG.percent.toc){o.textContent=btf.getScrollPercent(t,e)}s(t)},100);btf.addEventListenerPjax(window,"scroll",c,{passive:true})};const L=n=>{const t=window.globalFn||{};const o=t.themeChange||{};if(!o){return}Object.keys(o).forEach(t=>{const e=o[t];if(["disqus","disqusjs"].includes(t)){setTimeout(()=>e(n),300)}else{e(n)}})};const p={readmode:()=>{const t=document.body;t.classList.add("read-mode");const e=document.createElement("button");e.type="button";e.className="fas fa-sign-out-alt exit-readmode";t.appendChild(e);const n=()=>{t.classList.remove("read-mode");e.remove();e.removeEventListener("click",n)};e.addEventListener("click",n)},darkmode:()=>{const t=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";if(t==="dark"){activateDarkMode();GLOBAL_CONFIG.Snackbar!==undefined&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)}else{activateLightMode();GLOBAL_CONFIG.Snackbar!==undefined&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)}saveToLocal.set("theme",t,2);L(t)},"rightside-config":t=>{const e=t.firstElementChild;if(e.classList.contains("show")){e.classList.add("status");setTimeout(()=>{e.classList.remove("status")},300)}e.classList.toggle("show")},"go-up":()=>{btf.scrollToDest(0,500)},"hide-aside-btn":()=>{const t=document.documentElement.classList;const e=t.contains("hide-aside")?"show":"hide";saveToLocal.set("aside-status",e,2);t.toggle("hide-aside")},"mobile-toc-button":t=>{const e=document.getElementById("card-toc");e.style.transition="transform 0.3s ease-in-out";e.classList.toggle("open");e.addEventListener("transitionend",()=>{e.style.transition=""},{once:true})},"chat-btn":()=>{window.chatBtnFn()},translateLink:()=>{window.translateFn.translatePage()}};document.getElementById("rightside").addEventListener("click",function(t){const e=t.target.closest("[id]");if(e&&p[e.id]){p[e.id](this)}});const b=()=>{const t=t=>{const e=t.target.closest(".site-page.group");if(!e)return;e.classList.toggle("hide")};document.querySelector("#sidebar-menus .menus_items").addEventListener("click",t)};const y=()=>{const t=()=>{o.open()};btf.addEventListenerPjax(document.getElementById("toggle-menu"),"click",t)};const v=()=>{const{limitCount:o,languages:s}=GLOBAL_CONFIG.copyright;const t=t=>{t.preventDefault();const e=window.getSelection(0).toString();let n=e;if(e.length>o){n=`${e}\n\n\n${s.author}\n${s.link}${window.location.href}\n${s.source}\n${s.info}`}if(t.clipboardData){return t.clipboardData.setData("text",n)}else{return window.clipboardData.setData("text",n)}};document.body.addEventListener("copy",t)};const E=()=>{const t=document.getElementById("runtimeshow");if(t){const e=t.getAttribute("data-publishDate");t.textContent=`${btf.diffDate(e)} ${GLOBAL_CONFIG.runtime}`}};const w=()=>{const t=document.getElementById("last-push-date");if(t){const e=t.getAttribute("data-lastPushDate");t.textContent=btf.diffDate(e,true)}};const G=()=>{const t=document.querySelectorAll("#article-container table");if(!t.length)return;t.forEach(t=>{if(!t.closest(".highlight")){btf.wrap(t,"div",{class:"table-wrap"})}})};const O=()=>{const t=document.querySelectorAll("#article-container .hide-button");if(!t.length)return;const e=function(t){const e=this;e.classList.add("open");const n=e.nextElementSibling.querySelectorAll(".gallery-container");n.length&&f(n)};t.forEach(t=>{t.addEventListener("click",e,{once:true})})};const C=()=>{const t=document.querySelectorAll("#article-container .tabs");if(!t.length)return;const i=(t,e)=>{Array.from(t).forEach(t=>{t.classList.remove("active");if(t===e||t.id===e){t.classList.add("active")}})};const n=(t,c)=>{const e=function(t){const e=t.target.closest("button");if(e.classList.contains("active"))return;i(this.children,e);this.classList.remove("no-default");const n=e.getAttribute("data-href");const o=this.nextElementSibling;i(o.children,n);if(c){btf.removeGlobalFnEvent("igOfTabs",this);const s=o.querySelectorAll(`:scope > #${n} .gallery-container`);s.length&&f(s,this)}};btf.addEventListenerPjax(t.firstElementChild,"click",e)};const o=n=>{const t=t=>{const e=t.target.closest("button");if(!e)return;btf.scrollToDest(btf.getEleTop(n),300)};btf.addEventListenerPjax(n.lastElementChild,"click",t)};t.forEach(t=>{const e=!!t.querySelectorAll(".gallery-container");n(t,e);o(t)})};const A=()=>{const t=document.querySelector("#aside-cat-list.expandBtn");if(!t)return;const e=t=>{const e=t.target;if(e.nodeName==="I"){t.preventDefault();e.parentNode.classList.toggle("expand")}};btf.addEventListenerPjax(t,"click",e,true)};const I=()=>{const t=document.getElementById("switch-btn");if(!t)return;let e=false;const n=document.getElementById("post-comment");const o=()=>{n.classList.toggle("move");if(!e&&typeof loadOtherComment==="function"){e=true;loadOtherComment()}};btf.addEventListenerPjax(t,"click",o)};const B=()=>{const{limitDay:t,messagePrev:e,messageNext:n,position:o}=GLOBAL_CONFIG.noticeOutdate;const s=btf.diffDate(GLOBAL_CONFIG_SITE.postUpdate);if(s>=t){const c=document.createElement("div");c.className="post-outdate-notice";c.textContent=`${e} ${s} ${n}`;const i=document.getElementById("article-container");if(o==="top"){i.insertBefore(c,i.firstChild)}else{i.appendChild(c)}}};const S=()=>{window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"})};const k=function(t){t.forEach(t=>{const e=t.getAttribute("datetime");t.textContent=btf.diffDate(e,true);t.style.display="inline"})};const N=function(){window.addEventListener("resize",()=>{t(false);e&&btf.isHidden(document.getElementById("toggle-menu"))&&o.close()});document.getElementById("menu-mask").addEventListener("click",t=>{o.close()});b();GLOBAL_CONFIG.islazyload&&S();GLOBAL_CONFIG.copyright!==undefined&&v();if(GLOBAL_CONFIG.autoDarkmode){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{if(saveToLocal.get("theme")!==undefined)return;t.matches?L("dark"):L("light")})}};window.refreshFn=function(){n();if(GLOBAL_CONFIG_SITE.isPost){GLOBAL_CONFIG.noticeOutdate!==undefined&&B();GLOBAL_CONFIG.relativeDate.post&&k(document.querySelectorAll("#post-meta time"))}else{GLOBAL_CONFIG.relativeDate.homepage&&k(document.querySelectorAll("#recent-posts time"));GLOBAL_CONFIG.runtime&&E();w();A()}h();GLOBAL_CONFIG_SITE.isHome&&s();a();GLOBAL_CONFIG.isPhotoFigcaption&&l();g();btf.removeGlobalFnEvent("justifiedGallery");const t=document.querySelectorAll("#article-container .gallery-container");t.length&&f(t);r();G();O();C();I();y()};refreshFn();N()});