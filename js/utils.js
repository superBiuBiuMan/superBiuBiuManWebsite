const btf={debounce:(o,i=0,a=false)=>{let s;return(...t)=>{const e=()=>{s=null;if(!a)o(...t)};const n=a&&!s;clearTimeout(s);s=setTimeout(e,i);if(n)o(...t)}},throttle:function(o,i,a={}){let s,l,r;let c=0;const d=()=>{c=a.leading===false?0:(new Date).getTime();s=null;o.apply(l,r);if(!s)l=r=null};const t=(...t)=>{const e=(new Date).getTime();if(!c&&a.leading===false)c=e;const n=i-(e-c);l=this;r=t;if(n<=0||n>i){if(s){clearTimeout(s);s=null}c=e;o.apply(l,r);if(!s)l=r=null}else if(!s&&a.trailing!==false){s=setTimeout(d,n)}};return t},sidebarPaddingR:()=>{const t=window.innerWidth;const e=document.body.clientWidth;const n=t-e;if(t!==e){document.body.style.paddingRight=n+"px"}},snackbarShow:(t,e=false,n=2e3)=>{const{position:o,bgLight:i,bgDark:a}=GLOBAL_CONFIG.Snackbar;const s=document.documentElement.getAttribute("data-theme")==="light"?i:a;Snackbar.show({text:t,backgroundColor:s,showAction:e,duration:n,pos:o,customClass:"snackbar-css"})},diffDate:(t,e=false)=>{const n=new Date;const o=new Date(t);const i=n.getTime()-o.getTime();const a=1e3*60;const s=a*60;const l=s*24;const r=l*30;const{dateSuffix:c}=GLOBAL_CONFIG;if(!e)return parseInt(i/l);const d=i/r;const f=i/l;const m=i/s;const u=i/a;if(d>12)return o.toISOString().slice(0,10);if(d>=1)return`${parseInt(d)} ${c.month}`;if(f>=1)return`${parseInt(f)} ${c.day}`;if(m>=1)return`${parseInt(m)} ${c.hour}`;if(u>=1)return`${parseInt(u)} ${c.min}`;return c.just},loadComment:(t,e)=>{if("IntersectionObserver"in window){const n=new IntersectionObserver(t=>{if(t[0].isIntersecting){e();n.disconnect()}},{threshold:[0]});n.observe(t)}else{e()}},scrollToDest:(o,i=500)=>{const a=window.pageYOffset;const t=document.getElementById("page-header").classList.contains("fixed");if(a>o||t)o=o-70;if("scrollBehavior"in document.documentElement.style){window.scrollTo({top:o,behavior:"smooth"});return}let s=null;o=+o;window.requestAnimationFrame(function t(e){s=!s?e:s;const n=e-s;if(a<o){window.scrollTo(0,(o-a)*n/i+a)}else{window.scrollTo(0,a-(a-o)*n/i)}if(n<i){window.requestAnimationFrame(t)}else{window.scrollTo(0,o)}})},animateIn:(t,e)=>{t.style.display="block";t.style.animation=e},animateOut:(e,t)=>{e.addEventListener("animationend",function t(){e.style.display="";e.style.animation="";e.removeEventListener("animationend",t)});e.style.animation=t},wrap:(t,e,n)=>{const o=document.createElement(e);for(const[i,a]of Object.entries(n)){o.setAttribute(i,a)}t.parentNode.insertBefore(o,t);o.appendChild(t)},isHidden:t=>t.offsetHeight===0&&t.offsetWidth===0,getEleTop:t=>{let e=t.offsetTop;let n=t.offsetParent;while(n!==null){e+=n.offsetTop;n=n.offsetParent}return e},loadLightbox:t=>{const e=GLOBAL_CONFIG.lightbox;if(e==="mediumZoom"){mediumZoom(t,{background:"var(--zoom-bg)"})}if(e==="fancybox"){Array.from(t).forEach(t=>{if(t.parentNode.tagName!=="A"){const e=t.dataset.lazySrc||t.src;const n=t.title||t.alt||"";btf.wrap(t,"a",{href:e,"data-fancybox":"gallery","data-caption":n,"data-thumb":e})}});if(!window.fancyboxRun){Fancybox.bind("[data-fancybox]",{Hash:false,Thumbs:{showOnStart:false},Images:{Panzoom:{maxScale:4}},Carousel:{transition:"slide"},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}}});window.fancyboxRun=true}}},setLoading:{add:t=>{const e=`
        <div class="loading-container">
          <div class="loading-item">
            <div></div><div></div><div></div><div></div><div></div>
          </div>
        </div>
      `;t.insertAdjacentHTML("afterend",e)},remove:t=>{t.nextElementSibling.remove()}},updateAnchor:t=>{if(t!==window.location.hash){if(!t)t=location.pathname;const e=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:e},e,t)}},getScrollPercent:(t,e)=>{const n=e.clientHeight;const o=document.documentElement.clientHeight;const i=e.offsetTop;const a=n>o?n-o:document.documentElement.scrollHeight-o;const s=(t-i)/a;const l=Math.round(s*100);const r=l>100?100:l<=0?0:l;return r},addGlobalFn:(t,e,n=false,o=window)=>{const i=o.globalFn||{};const a=i[t]||{};if(n&&a[n])return;n=n||Object.keys(a).length;a[n]=e;i[t]=a;o.globalFn=i},addEventListenerPjax:(t,e,n,o=false)=>{t.addEventListener(e,n,o);btf.addGlobalFn("pjax",()=>{t.removeEventListener(e,n,o)})},removeGlobalFnEvent:(t,e=window)=>{const{globalFn:n={}}=e;const o=n[t]||{};const i=Object.keys(o);if(!i.length)return;i.forEach(t=>{o[t]()});delete e.globalFn[t]}};